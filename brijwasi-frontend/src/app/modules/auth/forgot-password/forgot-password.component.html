<div class="container">
  <div class="form-wrapper">
    <div class="form-header">
      <h1>Forgot Password</h1>
      <p>Enter your mobile number to reset your password</p>
    </div>

    <div *ngIf="errorMessage" class="error-alert">
      {{ errorMessage }}
    </div>

    <div *ngIf="!resetToken" class="form-content">
      <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
          <label for="mobileNumber">Mobile Number</label>
          <input
            type="tel"
            id="mobileNumber"
            class="form-control"
            formControlName="mobileNumber"
            placeholder="Enter your 10-digit mobile number"
            [class.is-invalid]="submitted && mobileNumber?.invalid"
          />
          <div *ngIf="submitted && mobileNumber?.invalid" class="invalid-feedback">
            <small *ngIf="mobileNumber?.errors?.['required']">Mobile number is required</small>
            <small *ngIf="mobileNumber?.errors?.['pattern']">Mobile number must be 10 digits</small>
          </div>
        </div>

        <button
          type="submit"
          class="btn btn-primary btn-block"
          [disabled]="loading"
        >
          {{ loading ? 'Processing...' : 'Get Reset Token' }}
        </button>
      </form>

      <div class="form-footer">
        <p>Remember your password? <a routerLink="/auth/login">Login here</a></p>
      </div>
    </div>

    <div *ngIf="resetToken" class="success-section">
      <div class="success-icon">âœ“</div>
      <h2>Reset Token Generated</h2>
      <p>Please copy the token below and use it to reset your password:</p>

      <div class="token-box">
        <code>{{ resetToken }}</code>
        <button type="button" class="btn-copy" (click)="copyToken()" title="Copy token">
          ðŸ“‹ Copy
        </button>
      </div>

      <p class="token-note">This token will expire in 15 minutes.</p>

      <div class="button-group">
        <button type="button" class="btn btn-primary" (click)="goToResetPassword()">
          Reset Password Now
        </button>
        <button type="button" class="btn btn-secondary" (click)="goToLogin()">
          Back to Login
        </button>
      </div>
    </div>
  </div>
</div>
